<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.2"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Keypop Calypso Card C++ API 2.0.0: keypop::calypso::card::transaction::TransactionManager&lt; T &gt; Class Template Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="logo.svg"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Keypop Calypso Card C++ API 2.0.0
   </div>
   <div id="projectbrief">Reference Calypso Card API for C++</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.2 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search",'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="namespacekeypop.html">keypop</a></li><li class="navelem"><a class="el" href="namespacekeypop_1_1calypso.html">calypso</a></li><li class="navelem"><a class="el" href="namespacekeypop_1_1calypso_1_1card.html">card</a></li><li class="navelem"><a class="el" href="namespacekeypop_1_1calypso_1_1card_1_1transaction.html">transaction</a></li><li class="navelem"><a class="el" href="classkeypop_1_1calypso_1_1card_1_1transaction_1_1_transaction_manager.html">TransactionManager</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="classkeypop_1_1calypso_1_1card_1_1transaction_1_1_transaction_manager-members.html">List of all members</a>  </div>
  <div class="headertitle"><div class="title">keypop::calypso::card::transaction::TransactionManager&lt; T &gt; Class Template Reference<span class="mlabels"><span class="mlabel">abstract</span></span></div></div>
</div><!--header-->
<div class="contents">

<p><code>#include &lt;<a class="el" href="_transaction_manager_8hpp_source.html">TransactionManager.hpp</a>&gt;</code></p>
<div class="dynheader">
Inheritance diagram for keypop::calypso::card::transaction::TransactionManager&lt; T &gt;:</div>
<div class="dyncontent">
<div class="center"><img src="classkeypop_1_1calypso_1_1card_1_1transaction_1_1_transaction_manager__inherit__graph.png" border="0" usemap="#akeypop_1_1calypso_1_1card_1_1transaction_1_1_transaction_manager_3_01_t_01_4_inherit__map" alt="Inheritance graph"/></div>
<map name="akeypop_1_1calypso_1_1card_1_1transaction_1_1_transaction_manager_3_01_t_01_4_inherit__map" id="akeypop_1_1calypso_1_1card_1_1transaction_1_1_transaction_manager_3_01_t_01_4_inherit__map">
<area shape="rect" title=" " alt="" coords="5,5,252,47"/>
<area shape="rect" href="classkeypop_1_1calypso_1_1card_1_1transaction_1_1_free_transaction_manager.html" title=" " alt="" coords="33,95,225,151"/>
</map>
<center><span class="legend">[<a href="graph_legend.html">legend</a>]</span></center></div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-methods" name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a2e46621c405ab8c150ef9b8bbbc9ba36"><td class="memItemLeft" align="right" valign="top">virtual T &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classkeypop_1_1calypso_1_1card_1_1transaction_1_1_transaction_manager.html#a2e46621c405ab8c150ef9b8bbbc9ba36">prepareSelectFile</a> (const uint16_t lid)=0</td></tr>
<tr class="separator:a2e46621c405ab8c150ef9b8bbbc9ba36"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab6d3381a6b26a2782560b2edb8ed9f22"><td class="memItemLeft" align="right" valign="top">virtual T &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classkeypop_1_1calypso_1_1card_1_1transaction_1_1_transaction_manager.html#ab6d3381a6b26a2782560b2edb8ed9f22">prepareSelectFile</a> (const <a class="el" href="namespacekeypop_1_1calypso_1_1card.html#aa97bf6256de21c264682854705d4a20e">SelectFileControl</a> selectFileControl)=0</td></tr>
<tr class="separator:ab6d3381a6b26a2782560b2edb8ed9f22"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab49b857571faeab0673ecf66b6dda799"><td class="memItemLeft" align="right" valign="top">virtual T &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classkeypop_1_1calypso_1_1card_1_1transaction_1_1_transaction_manager.html#ab49b857571faeab0673ecf66b6dda799">prepareGetData</a> (const <a class="el" href="namespacekeypop_1_1calypso_1_1card.html#aa274077fbdeafe85dfe208791490462f">GetDataTag</a> tag)=0</td></tr>
<tr class="separator:ab49b857571faeab0673ecf66b6dda799"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae6fb4eae6926e75e25b7f079b11b128a"><td class="memItemLeft" align="right" valign="top">virtual T &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classkeypop_1_1calypso_1_1card_1_1transaction_1_1_transaction_manager.html#ae6fb4eae6926e75e25b7f079b11b128a">prepareReadRecord</a> (const uint8_t sfi, const int recordNumber)=0</td></tr>
<tr class="separator:ae6fb4eae6926e75e25b7f079b11b128a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4d8f598596260b750dcde0cc30bd0ea3"><td class="memItemLeft" align="right" valign="top">virtual T &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classkeypop_1_1calypso_1_1card_1_1transaction_1_1_transaction_manager.html#a4d8f598596260b750dcde0cc30bd0ea3">prepareReadRecords</a> (const uint8_t sfi, const int fromRecordNumber, const int toRecordNumber, const int recordSize)=0</td></tr>
<tr class="separator:a4d8f598596260b750dcde0cc30bd0ea3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2707638d75e7f1cb8185b1f2777a98ac"><td class="memItemLeft" align="right" valign="top">virtual T &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classkeypop_1_1calypso_1_1card_1_1transaction_1_1_transaction_manager.html#a2707638d75e7f1cb8185b1f2777a98ac">prepareReadRecordsPartially</a> (const uint8_t sfi, const int fromRecordNumber, const int toRecordNumber, const int offset, const int nbBytesToRead)=0</td></tr>
<tr class="separator:a2707638d75e7f1cb8185b1f2777a98ac"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa31232adca25d6034f732f3091a31186"><td class="memItemLeft" align="right" valign="top">virtual T &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classkeypop_1_1calypso_1_1card_1_1transaction_1_1_transaction_manager.html#aa31232adca25d6034f732f3091a31186">prepareReadBinary</a> (const uint8_t sfi, const int offset, const int nbBytesToRead)=0</td></tr>
<tr class="separator:aa31232adca25d6034f732f3091a31186"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af70b47dc5f110d856a5f36cd31cb0589"><td class="memItemLeft" align="right" valign="top">virtual T &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classkeypop_1_1calypso_1_1card_1_1transaction_1_1_transaction_manager.html#af70b47dc5f110d856a5f36cd31cb0589">prepareReadCounter</a> (const uint8_t sfi, const int nbCountersToRead)=0</td></tr>
<tr class="separator:af70b47dc5f110d856a5f36cd31cb0589"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af35576f5880d9fe1ed08ef548bd0fa38"><td class="memItemLeft" align="right" valign="top">virtual T &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classkeypop_1_1calypso_1_1card_1_1transaction_1_1_transaction_manager.html#af35576f5880d9fe1ed08ef548bd0fa38">prepareSearchRecords</a> (const <a class="el" href="classkeypop_1_1calypso_1_1card_1_1transaction_1_1_search_command_data.html">SearchCommandData</a> data)=0</td></tr>
<tr class="separator:af35576f5880d9fe1ed08ef548bd0fa38"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a616ad3f2efa0fccf7f2b9cc7e5d055d8"><td class="memItemLeft" align="right" valign="top">virtual T &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classkeypop_1_1calypso_1_1card_1_1transaction_1_1_transaction_manager.html#a616ad3f2efa0fccf7f2b9cc7e5d055d8">prepareCheckPinStatus</a> ()=0</td></tr>
<tr class="separator:a616ad3f2efa0fccf7f2b9cc7e5d055d8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac7ee6d68128e1eb42683a9f4e197a86a"><td class="memItemLeft" align="right" valign="top">virtual T &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classkeypop_1_1calypso_1_1card_1_1transaction_1_1_transaction_manager.html#ac7ee6d68128e1eb42683a9f4e197a86a">prepareAppendRecord</a> (const uint8_t sfi, const std::vector&lt; uint8_t &gt; &amp;recordData)=0</td></tr>
<tr class="separator:ac7ee6d68128e1eb42683a9f4e197a86a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab398168b5f5d490e2a51ef5e6520be91"><td class="memItemLeft" align="right" valign="top">virtual T &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classkeypop_1_1calypso_1_1card_1_1transaction_1_1_transaction_manager.html#ab398168b5f5d490e2a51ef5e6520be91">prepareUpdateRecord</a> (const uint8_t sfi, const int recordNumber, const std::vector&lt; uint8_t &gt; &amp;recordData)=0</td></tr>
<tr class="separator:ab398168b5f5d490e2a51ef5e6520be91"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a051530935694fc2f3ab0dc6e48529324"><td class="memItemLeft" align="right" valign="top">virtual T &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classkeypop_1_1calypso_1_1card_1_1transaction_1_1_transaction_manager.html#a051530935694fc2f3ab0dc6e48529324">prepareWriteRecord</a> (const uint8_t sfi, const int recordNumber, const std::vector&lt; uint8_t &gt; &amp;recordData)=0</td></tr>
<tr class="separator:a051530935694fc2f3ab0dc6e48529324"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7f40240b866bf83fc0184e866758e1bf"><td class="memItemLeft" align="right" valign="top">virtual T &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classkeypop_1_1calypso_1_1card_1_1transaction_1_1_transaction_manager.html#a7f40240b866bf83fc0184e866758e1bf">prepareUpdateBinary</a> (const uint8_t sfi, const int offset, const std::vector&lt; uint8_t &gt; &amp;data)=0</td></tr>
<tr class="separator:a7f40240b866bf83fc0184e866758e1bf"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1f9d40613af44680adafa2e54c7d1b28"><td class="memItemLeft" align="right" valign="top">virtual T &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classkeypop_1_1calypso_1_1card_1_1transaction_1_1_transaction_manager.html#a1f9d40613af44680adafa2e54c7d1b28">prepareWriteBinary</a> (const uint8_t sfi, const int offset, const std::vector&lt; uint8_t &gt; &amp;data)=0</td></tr>
<tr class="separator:a1f9d40613af44680adafa2e54c7d1b28"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a644f58f25a10f9a468b29b05c21bddb9"><td class="memItemLeft" align="right" valign="top">virtual T &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classkeypop_1_1calypso_1_1card_1_1transaction_1_1_transaction_manager.html#a644f58f25a10f9a468b29b05c21bddb9">prepareIncreaseCounter</a> (const uint8_t sfi, const int counterNumber, const int incValue)=0</td></tr>
<tr class="separator:a644f58f25a10f9a468b29b05c21bddb9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a76c33db4e440196c306771da4abde111"><td class="memItemLeft" align="right" valign="top">virtual T &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classkeypop_1_1calypso_1_1card_1_1transaction_1_1_transaction_manager.html#a76c33db4e440196c306771da4abde111">prepareIncreaseCounters</a> (const uint8_t sfi, const std::map&lt; const int, const int &gt; &amp;counterNumberToIncValueMap)=0</td></tr>
<tr class="separator:a76c33db4e440196c306771da4abde111"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0eb453c7c7b290a2574d377b6e8804c1"><td class="memItemLeft" align="right" valign="top">virtual T &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classkeypop_1_1calypso_1_1card_1_1transaction_1_1_transaction_manager.html#a0eb453c7c7b290a2574d377b6e8804c1">prepareDecreaseCounter</a> (const uint8_t sfi, const int counterNumber, const int decValue)=0</td></tr>
<tr class="separator:a0eb453c7c7b290a2574d377b6e8804c1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a216a3bc390d805f9f6a88f95689a57b8"><td class="memItemLeft" align="right" valign="top">virtual T &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classkeypop_1_1calypso_1_1card_1_1transaction_1_1_transaction_manager.html#a216a3bc390d805f9f6a88f95689a57b8">prepareDecreaseCounters</a> (const uint8_t sfi, const std::map&lt; const int, const int &gt; &amp;counterNumberToDecValueMap)=0</td></tr>
<tr class="separator:a216a3bc390d805f9f6a88f95689a57b8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad8aed8382fd2b1b6b646927b9383453d"><td class="memItemLeft" align="right" valign="top">virtual T &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classkeypop_1_1calypso_1_1card_1_1transaction_1_1_transaction_manager.html#ad8aed8382fd2b1b6b646927b9383453d">prepareSetCounter</a> (const uint8_t sfi, const int counterNumber, const int newValue)=0</td></tr>
<tr class="separator:ad8aed8382fd2b1b6b646927b9383453d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae12f76805c68ed4de01103c8a5feb4ec"><td class="memItemLeft" align="right" valign="top">virtual T &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classkeypop_1_1calypso_1_1card_1_1transaction_1_1_transaction_manager.html#ae12f76805c68ed4de01103c8a5feb4ec">prepareSvReadAllLogs</a> ()=0</td></tr>
<tr class="separator:ae12f76805c68ed4de01103c8a5feb4ec"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afbcefe726c696e01f8347ee202792059"><td class="memItemLeft" align="right" valign="top">virtual T &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classkeypop_1_1calypso_1_1card_1_1transaction_1_1_transaction_manager.html#afbcefe726c696e01f8347ee202792059">prepareVerifyPin</a> (const std::vector&lt; uint8_t &gt; &amp;pin)=0</td></tr>
<tr class="separator:afbcefe726c696e01f8347ee202792059"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2a5b93734325da874f06ca4fa93cd918"><td class="memItemLeft" align="right" valign="top">virtual T &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classkeypop_1_1calypso_1_1card_1_1transaction_1_1_transaction_manager.html#a2a5b93734325da874f06ca4fa93cd918">prepareChangePin</a> (const std::vector&lt; uint8_t &gt; &amp;newPin)=0</td></tr>
<tr class="separator:a2a5b93734325da874f06ca4fa93cd918"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a52963048d39ae94fab98f00eca4c54fe"><td class="memItemLeft" align="right" valign="top">virtual T&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classkeypop_1_1calypso_1_1card_1_1transaction_1_1_transaction_manager.html#a52963048d39ae94fab98f00eca4c54fe">processCommands</a> (const <a class="el" href="namespacekeypop_1_1calypso_1_1card_1_1transaction.html#ab7da988e9bca2716613809d838185b97">ChannelControl</a> channelControl)=0</td></tr>
<tr class="separator:a52963048d39ae94fab98f00eca4c54fe"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a23a8ebeeca3d033c65e61d8d1992250b"><td class="memItemLeft" align="right" valign="top">const st::vector&lt; std::vector&lt; uint8_t &gt; &gt; &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classkeypop_1_1calypso_1_1card_1_1transaction_1_1_transaction_manager.html#a23a8ebeeca3d033c65e61d8d1992250b">getTransactionAuditData</a> () const =0</td></tr>
<tr class="separator:a23a8ebeeca3d033c65e61d8d1992250b"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><div class="compoundTemplParams">template&lt;typename T&gt;<br />
class keypop::calypso::card::transaction::TransactionManager&lt; T &gt;</div><p >Contains operations common to all card transactions.</p>
<p >To exchange data with the card, it is first necessary to prepare the commands to be transmitted to the card and then to process the prepared commands via the <a class="el" href="classkeypop_1_1calypso_1_1card_1_1transaction_1_1_transaction_manager.html#a52963048d39ae94fab98f00eca4c54fe">processCommands(ChannelControl)</a> method.</p>
<p >The card commands preparation step makes it possible to group commands together in order to minimize network data exchanges (especially useful in a distributed architecture).</p>
<p >The <a class="el" href="">CalypsoCard</a> object registered with the manager is updated during the transaction after each data exchange with the card.</p>
<p >For all "prepare" type commands, unless otherwise specified, here are the ranges of values checked for the various parameters:</p>
<ul>
<li>
SFI: [0..30] (0 indicates the current EF) </li>
<li>
Record number: [1..250] </li>
<li>
Counter number: [1..83] </li>
<li>
Counter value: [0..16777215] </li>
<li>
Offset: [0..249] or [0..32767] for binary files (0 indicates the first byte) </li>
<li>
Input data length: [1..250] or [1..32767] for binary files </li>
</ul>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">&lt;T&gt;</td><td>The type of the lowest level child object. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section since"><dt>Since</dt><dd>2.0.0 </dd></dl>

<p class="definition">Definition at line <a class="el" href="_transaction_manager_8hpp_source.html#l00054">54</a> of file <a class="el" href="_transaction_manager_8hpp_source.html">TransactionManager.hpp</a>.</p>
</div><h2 class="groupheader">Member Function Documentation</h2>
<a id="a23a8ebeeca3d033c65e61d8d1992250b" name="a23a8ebeeca3d033c65e61d8d1992250b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a23a8ebeeca3d033c65e61d8d1992250b">&#9670;&nbsp;</a></span>getTransactionAuditData()</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename T &gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">const st::vector&lt; std::vector&lt; uint8_t &gt; &gt; &amp; <a class="el" href="classkeypop_1_1calypso_1_1card_1_1transaction_1_1_transaction_manager.html">keypop::calypso::card::transaction::TransactionManager</a>&lt; T &gt;::getTransactionAuditData </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">pure virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p >Returns the audit data of the transaction containing all APDU exchanges with the card and the cryptographic module.</p>
<dl class="section return"><dt>Returns</dt><dd>An empty list if there is no audit data. </dd></dl>
<dl class="section since"><dt>Since</dt><dd>1.2.0 </dd></dl>

</div>
</div>
<a id="ac7ee6d68128e1eb42683a9f4e197a86a" name="ac7ee6d68128e1eb42683a9f4e197a86a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac7ee6d68128e1eb42683a9f4e197a86a">&#9670;&nbsp;</a></span>prepareAppendRecord()</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename T &gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual T &amp; <a class="el" href="classkeypop_1_1calypso_1_1card_1_1transaction_1_1_transaction_manager.html">keypop::calypso::card::transaction::TransactionManager</a>&lt; T &gt;::prepareAppendRecord </td>
          <td>(</td>
          <td class="paramtype">const uint8_t&#160;</td>
          <td class="paramname"><em>sfi</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::vector&lt; uint8_t &gt; &amp;&#160;</td>
          <td class="paramname"><em>recordData</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">pure virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p >Schedules the execution of an "Append Record" command to adds the data provided in the indicated "cyclic" file.</p>
<p >A new record is added, the oldest record is deleted.</p>
<p >Data will be available in <a class="el" href="">CalypsoCard</a> using the dedicated file and data management methods.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">sfi</td><td>The sfi to select. </td></tr>
    <tr><td class="paramname">recordData</td><td>The new record data to write. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The current instance. </dd></dl>
<dl class="exception"><dt>Exceptions</dt><dd>
  <table class="exception">
    <tr><td class="paramname">IllegalArgumentException</td><td>If one of the provided argument is out of range. </td></tr>
    <tr><td class="paramname"><a class="el" href="classkeypop_1_1calypso_1_1card_1_1transaction_1_1_session_buffer_overflow_exception.html">SessionBufferOverflowException</a></td><td>If the command will overflow the modifications buffer size and the multiple session is not allowed. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section since"><dt>Since</dt><dd>1.0.0 </dd></dl>

</div>
</div>
<a id="a2a5b93734325da874f06ca4fa93cd918" name="a2a5b93734325da874f06ca4fa93cd918"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2a5b93734325da874f06ca4fa93cd918">&#9670;&nbsp;</a></span>prepareChangePin()</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename T &gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual T &amp; <a class="el" href="classkeypop_1_1calypso_1_1card_1_1transaction_1_1_transaction_manager.html">keypop::calypso::card::transaction::TransactionManager</a>&lt; T &gt;::prepareChangePin </td>
          <td>(</td>
          <td class="paramtype">const std::vector&lt; uint8_t &gt; &amp;&#160;</td>
          <td class="paramname"><em>newPin</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">pure virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p >Schedules the execution of a "Change PIN" command to replace the current PIN with the new value provided.</p>
<p >This command can be performed only out of a secure session. The new PIN code can be transmitted in plain text or encrypted according to the parameter set in <a class="el" href="classkeypop_1_1calypso_1_1card_1_1transaction_1_1_symmetric_crypto_security_setting.html">SymmetricCryptoSecuritySetting</a>.</p>
<p >When the PIN is transmitted plain, this command must be preceded by a successful Verify PIN command (see <a class="el" href="">prepareVerifyPin(byte[])</a>).</p>
<p >The PIN status will be available in <a class="el" href="">CalypsoCard</a> using the <a class="el" href="">CalypsoCard#getPinAttemptRemaining()</a> and <a class="el" href="">CalypsoCard#isPinBlocked()</a> methods.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">newPin</td><td>The new PIN code value (4-byte long byte array). </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The current instance. </dd></dl>
<dl class="exception"><dt>Exceptions</dt><dd>
  <table class="exception">
    <tr><td class="paramname">UnsupportedOperationException</td><td>If the PIN feature is not available for this card. </td></tr>
    <tr><td class="paramname">IllegalArgumentException</td><td>If the provided argument is out of range. </td></tr>
    <tr><td class="paramname">IllegalStateException</td><td>If the command is executed while a secure session is open. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section since"><dt>Since</dt><dd>1.6.0 </dd></dl>

</div>
</div>
<a id="a616ad3f2efa0fccf7f2b9cc7e5d055d8" name="a616ad3f2efa0fccf7f2b9cc7e5d055d8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a616ad3f2efa0fccf7f2b9cc7e5d055d8">&#9670;&nbsp;</a></span>prepareCheckPinStatus()</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename T &gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual T &amp; <a class="el" href="classkeypop_1_1calypso_1_1card_1_1transaction_1_1_transaction_manager.html">keypop::calypso::card::transaction::TransactionManager</a>&lt; T &gt;::prepareCheckPinStatus </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">pure virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p >Schedules the execution of a "Verify Pin" command without PIN presentation in order to get the attempt counter.</p>
<p >The PIN status will be available in <a class="el" href="">CalypsoCard</a> using the <a class="el" href="">CalypsoCard#getPinAttemptRemaining()</a> and <a class="el" href="">CalypsoCard#isPinBlocked()</a> methods.</p>
<dl class="section return"><dt>Returns</dt><dd>The current instance. </dd></dl>
<dl class="exception"><dt>Exceptions</dt><dd>
  <table class="exception">
    <tr><td class="paramname">UnsupportedOperationException</td><td>If the PIN feature is not available for this card. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section since"><dt>Since</dt><dd>1.0.0 </dd></dl>

</div>
</div>
<a id="a0eb453c7c7b290a2574d377b6e8804c1" name="a0eb453c7c7b290a2574d377b6e8804c1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0eb453c7c7b290a2574d377b6e8804c1">&#9670;&nbsp;</a></span>prepareDecreaseCounter()</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename T &gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual T &amp; <a class="el" href="classkeypop_1_1calypso_1_1card_1_1transaction_1_1_transaction_manager.html">keypop::calypso::card::transaction::TransactionManager</a>&lt; T &gt;::prepareDecreaseCounter </td>
          <td>(</td>
          <td class="paramtype">const uint8_t&#160;</td>
          <td class="paramname"><em>sfi</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const int&#160;</td>
          <td class="paramname"><em>counterNumber</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const int&#160;</td>
          <td class="paramname"><em>decValue</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">pure virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p >Schedules the execution of a "Decrease" command to decrease the target counter.</p>
<p >If several counters of the same file have to be decremented at the same time of the transaction, it is recommended to use the method <a class="el" href="">prepareDecreaseCounters(byte, Map)</a> for optimization reasons.</p>
<p >Data will be available in <a class="el" href="">CalypsoCard</a> using the dedicated file and data management methods.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">sfi</td><td>SFI of the EF to select. </td></tr>
    <tr><td class="paramname">counterNumber</td><td>The number of the counter (must be zero in case of a simulated counter). </td></tr>
    <tr><td class="paramname">decValue</td><td>Value to subtract to the counter (defined as a positive int <div class="fragment"><div class="line">&lt;= </div>
</div><!-- fragment --> 16777215 [FFFFFFh]) </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The current instance. </dd></dl>
<dl class="exception"><dt>Exceptions</dt><dd>
  <table class="exception">
    <tr><td class="paramname">IllegalArgumentException</td><td>If one of the provided argument is out of range. </td></tr>
    <tr><td class="paramname"><a class="el" href="classkeypop_1_1calypso_1_1card_1_1transaction_1_1_session_buffer_overflow_exception.html">SessionBufferOverflowException</a></td><td>If the command will overflow the modifications buffer size and the multiple session is not allowed. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section since"><dt>Since</dt><dd>1.0.0 </dd></dl>

</div>
</div>
<a id="a216a3bc390d805f9f6a88f95689a57b8" name="a216a3bc390d805f9f6a88f95689a57b8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a216a3bc390d805f9f6a88f95689a57b8">&#9670;&nbsp;</a></span>prepareDecreaseCounters()</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename T &gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual T &amp; <a class="el" href="classkeypop_1_1calypso_1_1card_1_1transaction_1_1_transaction_manager.html">keypop::calypso::card::transaction::TransactionManager</a>&lt; T &gt;::prepareDecreaseCounters </td>
          <td>(</td>
          <td class="paramtype">const uint8_t&#160;</td>
          <td class="paramname"><em>sfi</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::map&lt; const int, const int &gt; &amp;&#160;</td>
          <td class="paramname"><em>counterNumberToDecValueMap</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">pure virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p >Schedules the execution of a "Decrease Multiple" command or multiple "Decrease" commands to decrease multiple target counters at the same time.</p>
<p >The decision to execute one or the other command is made according to the type of card.</p>
<p >Data will be available in <a class="el" href="">CalypsoCard</a> using the dedicated file and data management methods.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">sfi</td><td>SFI of the EF to select. </td></tr>
    <tr><td class="paramname">counterNumberToDecValueMap</td><td>The map containing the counter numbers to be decremented and their associated decrement values. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The current instance. </dd></dl>
<dl class="exception"><dt>Exceptions</dt><dd>
  <table class="exception">
    <tr><td class="paramname">IllegalArgumentException</td><td>If one of the provided argument is out of range or if the map is null or empty. </td></tr>
    <tr><td class="paramname"><a class="el" href="classkeypop_1_1calypso_1_1card_1_1transaction_1_1_session_buffer_overflow_exception.html">SessionBufferOverflowException</a></td><td>If the command will overflow the modifications buffer size and the multiple session is not allowed. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section since"><dt>Since</dt><dd>1.1.0 </dd></dl>

</div>
</div>
<a id="ab49b857571faeab0673ecf66b6dda799" name="ab49b857571faeab0673ecf66b6dda799"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab49b857571faeab0673ecf66b6dda799">&#9670;&nbsp;</a></span>prepareGetData()</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename T &gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual T &amp; <a class="el" href="classkeypop_1_1calypso_1_1card_1_1transaction_1_1_transaction_manager.html">keypop::calypso::card::transaction::TransactionManager</a>&lt; T &gt;::prepareGetData </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="namespacekeypop_1_1calypso_1_1card.html#aa274077fbdeafe85dfe208791490462f">GetDataTag</a>&#160;</td>
          <td class="paramname"><em>tag</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">pure virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p >Schedules the execution of a "Get Data" command to retrieve the data indicated by the provided tag.</p>
<p >Data will be available in <a class="el" href="">CalypsoCard</a> using the <a class="el" href="">ElementaryFile#getHeader()</a> or <a class="el" href="">CalypsoCard#getDirectoryHeader()</a> methods, depending on the provided tag.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">tag</td><td>The tag to use. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The current instance. </dd></dl>
<dl class="exception"><dt>Exceptions</dt><dd>
  <table class="exception">
    <tr><td class="paramname">UnsupportedOperationException</td><td>If the Get Data command with the provided tag is not supported. </td></tr>
    <tr><td class="paramname">IllegalArgumentException</td><td>If tag is null. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section since"><dt>Since</dt><dd>1.0.0 </dd></dl>

</div>
</div>
<a id="a644f58f25a10f9a468b29b05c21bddb9" name="a644f58f25a10f9a468b29b05c21bddb9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a644f58f25a10f9a468b29b05c21bddb9">&#9670;&nbsp;</a></span>prepareIncreaseCounter()</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename T &gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual T &amp; <a class="el" href="classkeypop_1_1calypso_1_1card_1_1transaction_1_1_transaction_manager.html">keypop::calypso::card::transaction::TransactionManager</a>&lt; T &gt;::prepareIncreaseCounter </td>
          <td>(</td>
          <td class="paramtype">const uint8_t&#160;</td>
          <td class="paramname"><em>sfi</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const int&#160;</td>
          <td class="paramname"><em>counterNumber</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const int&#160;</td>
          <td class="paramname"><em>incValue</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">pure virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p >Schedules the execution of an "Increase" command to increase the target counter.</p>
<p >If several counters of the same file have to be incremented at the same time of the transaction, it is recommended to use the method <a class="el" href="">prepareIncreaseCounters(byte, Map)</a> for optimization reasons.</p>
<p >Data will be available in <a class="el" href="">CalypsoCard</a> using the dedicated file and data management methods.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">sfi</td><td>SFI of the EF to select. </td></tr>
    <tr><td class="paramname">counterNumber</td><td>The number of the counter (must be zero in case of a simulated counter). </td></tr>
    <tr><td class="paramname">incValue</td><td>Value to add to the counter (defined as a positive int <div class="fragment"><div class="line">&lt;= </div>
</div><!-- fragment --> 16777215 [FFFFFFh]) </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The current instance. </dd></dl>
<dl class="exception"><dt>Exceptions</dt><dd>
  <table class="exception">
    <tr><td class="paramname">IllegalArgumentException</td><td>If one of the provided argument is out of range. </td></tr>
    <tr><td class="paramname"><a class="el" href="classkeypop_1_1calypso_1_1card_1_1transaction_1_1_session_buffer_overflow_exception.html">SessionBufferOverflowException</a></td><td>If the command will overflow the modifications buffer size and the multiple session is not allowed. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section since"><dt>Since</dt><dd>1.0.0 </dd></dl>

</div>
</div>
<a id="a76c33db4e440196c306771da4abde111" name="a76c33db4e440196c306771da4abde111"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a76c33db4e440196c306771da4abde111">&#9670;&nbsp;</a></span>prepareIncreaseCounters()</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename T &gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual T &amp; <a class="el" href="classkeypop_1_1calypso_1_1card_1_1transaction_1_1_transaction_manager.html">keypop::calypso::card::transaction::TransactionManager</a>&lt; T &gt;::prepareIncreaseCounters </td>
          <td>(</td>
          <td class="paramtype">const uint8_t&#160;</td>
          <td class="paramname"><em>sfi</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::map&lt; const int, const int &gt; &amp;&#160;</td>
          <td class="paramname"><em>counterNumberToIncValueMap</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">pure virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p >Schedules the execution of an "Increase Multiple" command or multiple "Increase" commands to increase multiple target counters at the same time.</p>
<p >The decision to execute one or the other command is made according to the type of card.</p>
<p >Data will be available in <a class="el" href="">CalypsoCard</a> using the dedicated file and data management methods.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">sfi</td><td>SFI of the EF to select. </td></tr>
    <tr><td class="paramname">counterNumberToIncValueMap</td><td>The map containing the counter numbers to be incremented and their associated increment values. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The current instance. </dd></dl>
<dl class="exception"><dt>Exceptions</dt><dd>
  <table class="exception">
    <tr><td class="paramname">IllegalArgumentException</td><td>If one of the provided argument is out of range or if the map is null or empty. </td></tr>
    <tr><td class="paramname"><a class="el" href="classkeypop_1_1calypso_1_1card_1_1transaction_1_1_session_buffer_overflow_exception.html">SessionBufferOverflowException</a></td><td>If the command will overflow the modifications buffer size and the multiple session is not allowed. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section since"><dt>Since</dt><dd>1.1.0 </dd></dl>

</div>
</div>
<a id="aa31232adca25d6034f732f3091a31186" name="aa31232adca25d6034f732f3091a31186"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa31232adca25d6034f732f3091a31186">&#9670;&nbsp;</a></span>prepareReadBinary()</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename T &gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual T &amp; <a class="el" href="classkeypop_1_1calypso_1_1card_1_1transaction_1_1_transaction_manager.html">keypop::calypso::card::transaction::TransactionManager</a>&lt; T &gt;::prepareReadBinary </td>
          <td>(</td>
          <td class="paramtype">const uint8_t&#160;</td>
          <td class="paramname"><em>sfi</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const int&#160;</td>
          <td class="paramname"><em>offset</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const int&#160;</td>
          <td class="paramname"><em>nbBytesToRead</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">pure virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p >Schedules the execution of one or multiple "Read Binary" commands to read all or part of the indicated "binary" EF.</p>
<p >Data will be available in <a class="el" href="">CalypsoCard</a> using the dedicated file and data management methods.</p>
<p >Depending on whether we are inside a secure session, there are two types of behavior following this command:</p>
<ul>
<li>
Outside a secure session (best effort mode): the following "process" command will not fail whatever the existence of the targeted file or the validity of the offset and number of bytes to read (the <a class="el" href="">CalypsoCard</a> object may not be filled). </li>
<li>
Inside a secure session (strict mode): the following "process" command will fail if the targeted file does not exist or if the offset and number of bytes to read are not valid (the <a class="el" href="">CalypsoCard</a> object is always filled or an exception is raised when the reading failed).<br  />
 Invalid parameters could lead to additional exchanges with the card and thus corrupt the security of the session. </li>
</ul>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">sfi</td><td>The SFI of the EF. </td></tr>
    <tr><td class="paramname">offset</td><td>The offset (0 indicates the first byte). </td></tr>
    <tr><td class="paramname">nbBytesToRead</td><td>The number of bytes to read. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The current instance. </dd></dl>
<dl class="exception"><dt>Exceptions</dt><dd>
  <table class="exception">
    <tr><td class="paramname">UnsupportedOperationException</td><td>If this command is not supported by this card. </td></tr>
    <tr><td class="paramname">IllegalArgumentException</td><td>If one of the provided argument is out of range. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section since"><dt>Since</dt><dd>1.1.0 </dd></dl>

</div>
</div>
<a id="af70b47dc5f110d856a5f36cd31cb0589" name="af70b47dc5f110d856a5f36cd31cb0589"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af70b47dc5f110d856a5f36cd31cb0589">&#9670;&nbsp;</a></span>prepareReadCounter()</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename T &gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual T &amp; <a class="el" href="classkeypop_1_1calypso_1_1card_1_1transaction_1_1_transaction_manager.html">keypop::calypso::card::transaction::TransactionManager</a>&lt; T &gt;::prepareReadCounter </td>
          <td>(</td>
          <td class="paramtype">const uint8_t&#160;</td>
          <td class="paramname"><em>sfi</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const int&#160;</td>
          <td class="paramname"><em>nbCountersToRead</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">pure virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p >Schedules the execution of a "Read Records" command to reads a record of the indicated EF, which should be a "counter" file.</p>
<p >The record will be read up to the counter location indicated in parameter.<br  />
 Thus, all previous counters will also be read.</p>
<p >Data will be available in <a class="el" href="">CalypsoCard</a> using the dedicated file and data management methods.</p>
<p >Depending on whether we are inside a secure session, there are two types of behavior following this command:</p>
<ul>
<li>
Outside a secure session (best effort mode): the following "process" command will not fail whatever the existence of the targeted file or counter (the <a class="el" href="">CalypsoCard</a> object may not be filled). </li>
<li>
Inside a secure session (strict mode): the following "process" command will fail if the targeted file or counter does not exist (the <a class="el" href="">CalypsoCard</a> object is always filled or an exception is raised when the reading failed).<br  />
 Invalid parameters could lead to additional exchanges with the card and thus corrupt the security of the session. </li>
</ul>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">sfi</td><td>The SFI of the EF. </td></tr>
    <tr><td class="paramname">nbCountersToRead</td><td>The number of counters to read. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The current instance. </dd></dl>
<dl class="exception"><dt>Exceptions</dt><dd>
  <table class="exception">
    <tr><td class="paramname">IllegalArgumentException</td><td>If one of the provided argument is out of range. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section since"><dt>Since</dt><dd>1.1.0 </dd></dl>

</div>
</div>
<a id="ae6fb4eae6926e75e25b7f079b11b128a" name="ae6fb4eae6926e75e25b7f079b11b128a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae6fb4eae6926e75e25b7f079b11b128a">&#9670;&nbsp;</a></span>prepareReadRecord()</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename T &gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual T &amp; <a class="el" href="classkeypop_1_1calypso_1_1card_1_1transaction_1_1_transaction_manager.html">keypop::calypso::card::transaction::TransactionManager</a>&lt; T &gt;::prepareReadRecord </td>
          <td>(</td>
          <td class="paramtype">const uint8_t&#160;</td>
          <td class="paramname"><em>sfi</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const int&#160;</td>
          <td class="paramname"><em>recordNumber</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">pure virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p >Schedules the execution of a "Read Records" command to read a single record from the indicated EF.</p>
<p >Data will be available in <a class="el" href="">CalypsoCard</a> using the dedicated file and data management methods.</p>
<p >Depending on whether we are inside a secure session, there are two types of behavior following this command:</p>
<ul>
<li>
Outside a secure session (best effort mode): the following "process" command will not fail whatever the existence of the targeted file or record (the <a class="el" href="">CalypsoCard</a> object may not be filled). </li>
<li>
Inside a secure session in contactless mode (strict mode): the following "process" command will fail if the targeted file or record does not exist (the CalypsoCard object is always filled or an exception is raised when the reading failed). </li>
</ul>
<p ><b>This method should not be used inside a secure session in contact mode</b> because additional exchanges with the card will be operated and will corrupt the security of the session. Instead, use the method <a class="el" href="">prepareReadRecords(byte, int, int, int)</a> for this case and provide valid parameters.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">sfi</td><td>The SFI of the EF to read. </td></tr>
    <tr><td class="paramname">recordNumber</td><td>The record to read. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The current instance. </dd></dl>
<dl class="exception"><dt>Exceptions</dt><dd>
  <table class="exception">
    <tr><td class="paramname">IllegalArgumentException</td><td>If one of the provided arguments is out of range. </td></tr>
    <tr><td class="paramname">IllegalStateException</td><td>If this method is called inside a secure session in contact mode. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section since"><dt>Since</dt><dd>1.1.0 </dd></dl>

</div>
</div>
<a id="a4d8f598596260b750dcde0cc30bd0ea3" name="a4d8f598596260b750dcde0cc30bd0ea3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4d8f598596260b750dcde0cc30bd0ea3">&#9670;&nbsp;</a></span>prepareReadRecords()</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename T &gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual T &amp; <a class="el" href="classkeypop_1_1calypso_1_1card_1_1transaction_1_1_transaction_manager.html">keypop::calypso::card::transaction::TransactionManager</a>&lt; T &gt;::prepareReadRecords </td>
          <td>(</td>
          <td class="paramtype">const uint8_t&#160;</td>
          <td class="paramname"><em>sfi</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const int&#160;</td>
          <td class="paramname"><em>fromRecordNumber</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const int&#160;</td>
          <td class="paramname"><em>toRecordNumber</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const int&#160;</td>
          <td class="paramname"><em>recordSize</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">pure virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p >Schedules the execution of a "Read Records" command to read one or more records from the indicated EF.</p>
<p >Data will be available in <a class="el" href="">CalypsoCard</a> using the dedicated file and data management methods.</p>
<p >Depending on whether we are inside a secure session, there are two types of behavior following this command:</p>
<ul>
<li>
Outside a secure session (best effort mode): the following "process" command will not fail whatever the existence of the targeted file or record (the <a class="el" href="">CalypsoCard</a> object may not be filled). </li>
<li>
Inside a secure session (strict mode): the following "process" command will fail if the targeted file or record does not exist (the <a class="el" href="">CalypsoCard</a> object is always filled or an exception is raised when the reading failed).<br  />
 Invalid parameters could lead to additional exchanges with the card and thus corrupt the security of the session. </li>
</ul>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">sfi</td><td>The SFI of the EF. </td></tr>
    <tr><td class="paramname">fromRecordNumber</td><td>The number of the first record to read. </td></tr>
    <tr><td class="paramname">toRecordNumber</td><td>The number of the last record to read. </td></tr>
    <tr><td class="paramname">recordSize</td><td>The record length. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The current instance. </dd></dl>
<dl class="exception"><dt>Exceptions</dt><dd>
  <table class="exception">
    <tr><td class="paramname">IllegalArgumentException</td><td>If one of the provided argument is out of range. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section since"><dt>Since</dt><dd>1.1.0 </dd></dl>

</div>
</div>
<a id="a2707638d75e7f1cb8185b1f2777a98ac" name="a2707638d75e7f1cb8185b1f2777a98ac"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2707638d75e7f1cb8185b1f2777a98ac">&#9670;&nbsp;</a></span>prepareReadRecordsPartially()</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename T &gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual T &amp; <a class="el" href="classkeypop_1_1calypso_1_1card_1_1transaction_1_1_transaction_manager.html">keypop::calypso::card::transaction::TransactionManager</a>&lt; T &gt;::prepareReadRecordsPartially </td>
          <td>(</td>
          <td class="paramtype">const uint8_t&#160;</td>
          <td class="paramname"><em>sfi</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const int&#160;</td>
          <td class="paramname"><em>fromRecordNumber</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const int&#160;</td>
          <td class="paramname"><em>toRecordNumber</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const int&#160;</td>
          <td class="paramname"><em>offset</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const int&#160;</td>
          <td class="paramname"><em>nbBytesToRead</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">pure virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p >Schedules the execution of one or multiple "Read Record Multiple" commands to read all or parts of multiple records of the indicated EF.</p>
<p >Data will be available in <a class="el" href="">CalypsoCard</a> using the dedicated file and data management methods.</p>
<p >Depending on whether we are inside a secure session, there are two types of behavior following this command:</p>
<ul>
<li>
Outside a secure session (best effort mode): the following "process" command will not fail whatever the existence of the targeted file or the validity of the offset and number of bytes to read (the <a class="el" href="">CalypsoCard</a> object may not be filled). </li>
<li>
Inside a secure session (strict mode): the following "process" command will fail if the targeted file does not exist or if the offset and number of bytes to read are not valid (the <a class="el" href="">CalypsoCard</a> object is always filled or an exception is raised when the reading failed).<br  />
 Invalid parameters could lead to additional exchanges with the card and thus corrupt the security of the session. </li>
</ul>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">sfi</td><td>The SFI of the EF. </td></tr>
    <tr><td class="paramname">fromRecordNumber</td><td>The number of the first record to read. </td></tr>
    <tr><td class="paramname">toRecordNumber</td><td>The number of the last record to read. </td></tr>
    <tr><td class="paramname">offset</td><td>The offset in the records where to start reading (0 indicates the first byte). </td></tr>
    <tr><td class="paramname">nbBytesToRead</td><td>The number of bytes to read from each record. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The current instance. </dd></dl>
<dl class="exception"><dt>Exceptions</dt><dd>
  <table class="exception">
    <tr><td class="paramname">UnsupportedOperationException</td><td>If this command is not supported by this card. </td></tr>
    <tr><td class="paramname">IllegalArgumentException</td><td>If one of the provided argument is out of range. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section since"><dt>Since</dt><dd>1.1.0 </dd></dl>

</div>
</div>
<a id="af35576f5880d9fe1ed08ef548bd0fa38" name="af35576f5880d9fe1ed08ef548bd0fa38"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af35576f5880d9fe1ed08ef548bd0fa38">&#9670;&nbsp;</a></span>prepareSearchRecords()</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename T &gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual T &amp; <a class="el" href="classkeypop_1_1calypso_1_1card_1_1transaction_1_1_transaction_manager.html">keypop::calypso::card::transaction::TransactionManager</a>&lt; T &gt;::prepareSearchRecords </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classkeypop_1_1calypso_1_1card_1_1transaction_1_1_search_command_data.html">SearchCommandData</a>&#160;</td>
          <td class="paramname"><em>data</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">pure virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p >Schedules the execution of a "Search Record Multiple" command to search data in the records of the indicated EF, from a given record to the last record of the file. It will return the list of record numbers containing these data, and if requested it will read the first record content.</p>
<p >The command is only possible with a "linear", "cyclic", Counters or Simulated "counter" EF.</p>
<p >The command searches if the given data are present in the records of the file. During the search, an optional mask is applied. The mask allows to specify precisely the bits to be taken into account in the comparison.</p>
<p >See <a class="el" href="classkeypop_1_1calypso_1_1card_1_1transaction_1_1_search_command_data.html">SearchCommandData</a> class for a description of the parameters.</p>
<p >Once this command is processed, the result is available in the provided input/output <a class="el" href="classkeypop_1_1calypso_1_1card_1_1transaction_1_1_search_command_data.html">SearchCommandData</a> object, and the content of the first matching record in CalypsoCard if requested.</p>
<p >Depending on whether we are inside a secure session, there are two types of behavior following this command:</p>
<ul>
<li>
Outside a secure session (best effort mode): the following "process" command will not fail whatever the existence of the targeted file or the validity of the record number and offset (the <a class="el" href="classkeypop_1_1calypso_1_1card_1_1transaction_1_1_search_command_data.html">SearchCommandData</a> and <a class="el" href="">CalypsoCard</a> objects may not be updated). </li>
<li>
Inside a secure session (strict mode): the following "process" command will fail if the targeted file does not exist or if the record number and the offset are not valid (the <a class="el" href="classkeypop_1_1calypso_1_1card_1_1transaction_1_1_search_command_data.html">SearchCommandData</a> and <a class="el" href="">CalypsoCard</a> objects are always filled or an exception is raised when the reading failed). </li>
</ul>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">data</td><td>The input/output data containing the parameters of the command. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The current instance. </dd></dl>
<dl class="exception"><dt>Exceptions</dt><dd>
  <table class="exception">
    <tr><td class="paramname">UnsupportedOperationException</td><td>If the "Search Record Multiple" command is not available for this card. </td></tr>
    <tr><td class="paramname">IllegalArgumentException</td><td>If the input data is inconsistent. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="classkeypop_1_1calypso_1_1card_1_1transaction_1_1_search_command_data.html">SearchCommandData</a> </dd></dl>
<dl class="section since"><dt>Since</dt><dd>1.1.0 </dd></dl>

</div>
</div>
<a id="ab6d3381a6b26a2782560b2edb8ed9f22" name="ab6d3381a6b26a2782560b2edb8ed9f22"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab6d3381a6b26a2782560b2edb8ed9f22">&#9670;&nbsp;</a></span>prepareSelectFile() <span class="overload">[1/2]</span></h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename T &gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual T &amp; <a class="el" href="classkeypop_1_1calypso_1_1card_1_1transaction_1_1_transaction_manager.html">keypop::calypso::card::transaction::TransactionManager</a>&lt; T &gt;::prepareSelectFile </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="namespacekeypop_1_1calypso_1_1card.html#aa97bf6256de21c264682854705d4a20e">SelectFileControl</a>&#160;</td>
          <td class="paramname"><em>selectFileControl</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">pure virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p >Schedules the execution of a "Select File" command using a navigation selectFileControl defined by the ISO standard.</p>
<p >Data will be available in <a class="el" href="">CalypsoCard</a> using the <a class="el" href="">ElementaryFile#getHeader()</a> method.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">selectFileControl</td><td>A <a class="el" href="namespacekeypop_1_1calypso_1_1card.html#aa97bf6256de21c264682854705d4a20e">SelectFileControl</a> enum entry. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The current instance. </dd></dl>
<dl class="exception"><dt>Exceptions</dt><dd>
  <table class="exception">
    <tr><td class="paramname">IllegalArgumentException</td><td>If selectFileControl is null. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section since"><dt>Since</dt><dd>1.0.0 </dd></dl>

</div>
</div>
<a id="a2e46621c405ab8c150ef9b8bbbc9ba36" name="a2e46621c405ab8c150ef9b8bbbc9ba36"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2e46621c405ab8c150ef9b8bbbc9ba36">&#9670;&nbsp;</a></span>prepareSelectFile() <span class="overload">[2/2]</span></h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename T &gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual T &amp; <a class="el" href="classkeypop_1_1calypso_1_1card_1_1transaction_1_1_transaction_manager.html">keypop::calypso::card::transaction::TransactionManager</a>&lt; T &gt;::prepareSelectFile </td>
          <td>(</td>
          <td class="paramtype">const uint16_t&#160;</td>
          <td class="paramname"><em>lid</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">pure virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p >Schedules the execution of a "Select File" command to select an EF by its LID in the current DF.</p>
<p >Data will be available in <a class="el" href="">CalypsoCard</a> using the <a class="el" href="">CalypsoCard#getFileBySfi(byte)</a>/<a class="el" href="">CalypsoCard#getFileByLid(short)</a> and <a class="el" href="">ElementaryFile#getHeader()</a> methods.</p>
<p >Caution: the command will fail if the selected file is not an EF.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">lid</td><td>The LID of the EF to select. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The current instance. </dd></dl>
<dl class="section since"><dt>Since</dt><dd>1.1.0 </dd></dl>

</div>
</div>
<a id="ad8aed8382fd2b1b6b646927b9383453d" name="ad8aed8382fd2b1b6b646927b9383453d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad8aed8382fd2b1b6b646927b9383453d">&#9670;&nbsp;</a></span>prepareSetCounter()</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename T &gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual T &amp; <a class="el" href="classkeypop_1_1calypso_1_1card_1_1transaction_1_1_transaction_manager.html">keypop::calypso::card::transaction::TransactionManager</a>&lt; T &gt;::prepareSetCounter </td>
          <td>(</td>
          <td class="paramtype">const uint8_t&#160;</td>
          <td class="paramname"><em>sfi</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const int&#160;</td>
          <td class="paramname"><em>counterNumber</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const int&#160;</td>
          <td class="paramname"><em>newValue</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">pure virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p >Schedules the execution of an "Increase" or "Decrease" command to set the value of the target counter.</p>
<p >The operation (Increase or Decrease) is selected according to whether the difference between the current value and the desired value is negative (Increase) or positive (Decrease).</p>
<p >Data will be available in <a class="el" href="">CalypsoCard</a> using the dedicated file and data management methods.</p>
<p >Note: it is assumed here that:<br  />
</p>
<ul>
<li>
the counter value has been read before, </li>
<li>
the type of session (and associated access rights) is consistent with the requested operation: reload session if the counter is to be incremented, debit if it is to be decremented.<br  />
 No control is performed on this point by this method; the closing of the session will determine the success of the operation.. </li>
</ul>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">counterNumber</td><td><div class="fragment"><div class="line">&gt;= </div>
</div><!-- fragment --> 1: Counters file, number of the counter. 0: Simulated "counter" file. </td></tr>
    <tr><td class="paramname">sfi</td><td>SFI of the EF to select. </td></tr>
    <tr><td class="paramname">newValue</td><td>The desired value for the counter (defined as a positive int <div class="fragment"><div class="line">&lt;= </div>
</div><!-- fragment --> 16777215 [FFFFFFh]) </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The current instance. </dd></dl>
<dl class="exception"><dt>Exceptions</dt><dd>
  <table class="exception">
    <tr><td class="paramname">IllegalArgumentException</td><td>If one of the provided argument is out of range. </td></tr>
    <tr><td class="paramname">IllegalStateException</td><td>If the current counter value is unknown. </td></tr>
    <tr><td class="paramname"><a class="el" href="classkeypop_1_1calypso_1_1card_1_1transaction_1_1_session_buffer_overflow_exception.html">SessionBufferOverflowException</a></td><td>If the command will overflow the modifications buffer size and the multiple session is not allowed. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section since"><dt>Since</dt><dd>1.0.0 </dd></dl>

</div>
</div>
<a id="ae12f76805c68ed4de01103c8a5feb4ec" name="ae12f76805c68ed4de01103c8a5feb4ec"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae12f76805c68ed4de01103c8a5feb4ec">&#9670;&nbsp;</a></span>prepareSvReadAllLogs()</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename T &gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual T &amp; <a class="el" href="classkeypop_1_1calypso_1_1card_1_1transaction_1_1_transaction_manager.html">keypop::calypso::card::transaction::TransactionManager</a>&lt; T &gt;::prepareSvReadAllLogs </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">pure virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p >Schedules the execution of "Read Records" commands to read all SV logs.</p>
<p >Note: this method requires that the selected application is of type Store Value (file structure 20h).</p>
<p >The SV transaction logs are contained in two files with fixed identifiers:</p>
<ul>
<li>
The file whose SFI is 14h contains 1 record containing the unique reload log. </li>
<li>
The file whose SFI is 15h contains 3 records containing the last three debit logs. </li>
</ul>
<p >Data will be available in <a class="el" href="">CalypsoCard</a> in raw format using the dedicated file and data management methods or in the form of dedicated objects using the <a class="el" href="">CalypsoCard#getSvLoadLogRecord()</a> and <a class="el" href="">CalypsoCard#getSvDebitLogAllRecords()</a> methods.</p>
<dl class="section return"><dt>Returns</dt><dd>The current instance. </dd></dl>
<dl class="exception"><dt>Exceptions</dt><dd>
  <table class="exception">
    <tr><td class="paramname">UnsupportedOperationException</td><td>If the SV feature is not available for this card. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section since"><dt>Since</dt><dd>1.0.0 </dd></dl>

</div>
</div>
<a id="a7f40240b866bf83fc0184e866758e1bf" name="a7f40240b866bf83fc0184e866758e1bf"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7f40240b866bf83fc0184e866758e1bf">&#9670;&nbsp;</a></span>prepareUpdateBinary()</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename T &gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual T &amp; <a class="el" href="classkeypop_1_1calypso_1_1card_1_1transaction_1_1_transaction_manager.html">keypop::calypso::card::transaction::TransactionManager</a>&lt; T &gt;::prepareUpdateBinary </td>
          <td>(</td>
          <td class="paramtype">const uint8_t&#160;</td>
          <td class="paramname"><em>sfi</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const int&#160;</td>
          <td class="paramname"><em>offset</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::vector&lt; uint8_t &gt; &amp;&#160;</td>
          <td class="paramname"><em>data</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">pure virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p >Schedules the execution of one or multiple "Update Binary" command to replace the indicated data of a "binary" file with the new data given from the indicated offset.</p>
<p >The data of the file before the offset and after the data given are left unchanged.</p>
<p >Data will be available in <a class="el" href="">CalypsoCard</a> using the dedicated file and data management methods.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">sfi</td><td>The SFI of the EF to select. </td></tr>
    <tr><td class="paramname">offset</td><td>The offset (0 indicates the first byte). </td></tr>
    <tr><td class="paramname">data</td><td>The new data. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The current instance. </dd></dl>
<dl class="exception"><dt>Exceptions</dt><dd>
  <table class="exception">
    <tr><td class="paramname">UnsupportedOperationException</td><td>If this command is not supported by this card. </td></tr>
    <tr><td class="paramname">IllegalArgumentException</td><td>If one of the provided argument is out of range. </td></tr>
    <tr><td class="paramname"><a class="el" href="classkeypop_1_1calypso_1_1card_1_1transaction_1_1_session_buffer_overflow_exception.html">SessionBufferOverflowException</a></td><td>If the command will overflow the modifications buffer size and the multiple session is not allowed. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section since"><dt>Since</dt><dd>1.1.0 </dd></dl>

</div>
</div>
<a id="ab398168b5f5d490e2a51ef5e6520be91" name="ab398168b5f5d490e2a51ef5e6520be91"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab398168b5f5d490e2a51ef5e6520be91">&#9670;&nbsp;</a></span>prepareUpdateRecord()</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename T &gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual T &amp; <a class="el" href="classkeypop_1_1calypso_1_1card_1_1transaction_1_1_transaction_manager.html">keypop::calypso::card::transaction::TransactionManager</a>&lt; T &gt;::prepareUpdateRecord </td>
          <td>(</td>
          <td class="paramtype">const uint8_t&#160;</td>
          <td class="paramname"><em>sfi</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const int&#160;</td>
          <td class="paramname"><em>recordNumber</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::vector&lt; uint8_t &gt; &amp;&#160;</td>
          <td class="paramname"><em>recordData</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">pure virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p >Schedules the execution of an "Update Record" command to overwrites the target file's record contents with the provided data.</p>
<p >If the input data is shorter than the record size, only the first bytes will be overwritten.</p>
<p >Data will be available in <a class="el" href="">CalypsoCard</a> using the dedicated file and data management methods.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">sfi</td><td>The sfi to select. </td></tr>
    <tr><td class="paramname">recordNumber</td><td>The record to update. </td></tr>
    <tr><td class="paramname">recordData</td><td>The new record data. If length <div class="fragment"><div class="line">&lt;</div>
</div><!-- fragment --> RecSize, bytes beyond length are. left unchanged. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The current instance. </dd></dl>
<dl class="exception"><dt>Exceptions</dt><dd>
  <table class="exception">
    <tr><td class="paramname">IllegalArgumentException</td><td>If one of the provided argument is out of range. </td></tr>
    <tr><td class="paramname"><a class="el" href="classkeypop_1_1calypso_1_1card_1_1transaction_1_1_session_buffer_overflow_exception.html">SessionBufferOverflowException</a></td><td>If the command will overflow the modifications buffer size and the multiple session is not allowed. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section since"><dt>Since</dt><dd>1.0.0 </dd></dl>

</div>
</div>
<a id="afbcefe726c696e01f8347ee202792059" name="afbcefe726c696e01f8347ee202792059"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afbcefe726c696e01f8347ee202792059">&#9670;&nbsp;</a></span>prepareVerifyPin()</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename T &gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual T &amp; <a class="el" href="classkeypop_1_1calypso_1_1card_1_1transaction_1_1_transaction_manager.html">keypop::calypso::card::transaction::TransactionManager</a>&lt; T &gt;::prepareVerifyPin </td>
          <td>(</td>
          <td class="paramtype">const std::vector&lt; uint8_t &gt; &amp;&#160;</td>
          <td class="paramname"><em>pin</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">pure virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p >Schedules the execution of a "Verify PIN" command in order to authenticate the cardholder and/or unlock access to certain card files.</p>
<p >This command can be performed both in and out of a secure session. The PIN code can be transmitted in plain text or encrypted according to the parameter set in <a class="el" href="classkeypop_1_1calypso_1_1card_1_1transaction_1_1_symmetric_crypto_security_setting.html">SymmetricCryptoSecuritySetting</a>.</p>
<p >The PIN status will be available in <a class="el" href="">CalypsoCard</a> using the <a class="el" href="">CalypsoCard#getPinAttemptRemaining()</a> and <a class="el" href="">CalypsoCard#isPinBlocked()</a> methods.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">pin</td><td>The PIN code value (4-byte long byte array). </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The current instance. </dd></dl>
<dl class="exception"><dt>Exceptions</dt><dd>
  <table class="exception">
    <tr><td class="paramname">UnsupportedOperationException</td><td>If the PIN feature is not available for this card. </td></tr>
    <tr><td class="paramname">IllegalArgumentException</td><td>If the provided argument is out of range. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section since"><dt>Since</dt><dd>1.6.0 </dd></dl>

</div>
</div>
<a id="a1f9d40613af44680adafa2e54c7d1b28" name="a1f9d40613af44680adafa2e54c7d1b28"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1f9d40613af44680adafa2e54c7d1b28">&#9670;&nbsp;</a></span>prepareWriteBinary()</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename T &gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual T &amp; <a class="el" href="classkeypop_1_1calypso_1_1card_1_1transaction_1_1_transaction_manager.html">keypop::calypso::card::transaction::TransactionManager</a>&lt; T &gt;::prepareWriteBinary </td>
          <td>(</td>
          <td class="paramtype">const uint8_t&#160;</td>
          <td class="paramname"><em>sfi</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const int&#160;</td>
          <td class="paramname"><em>offset</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::vector&lt; uint8_t &gt; &amp;&#160;</td>
          <td class="paramname"><em>data</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">pure virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p >Schedules the execution of one or multiple "Write Binary" commands to write over the indicated data of a "binary" file. The new data will be the result of a binary OR operation between the existing data and the data given in the command from the indicated offset.</p>
<p >The data of the file before the offset and after the data given are left unchanged.</p>
<p >Data will be available in <a class="el" href="">CalypsoCard</a> using the dedicated file and data management methods.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">sfi</td><td>The SFI of the EF to select. </td></tr>
    <tr><td class="paramname">offset</td><td>The offset (0 indicates the first byte). </td></tr>
    <tr><td class="paramname">data</td><td>The data to write over the existing data. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The current instance. </dd></dl>
<dl class="exception"><dt>Exceptions</dt><dd>
  <table class="exception">
    <tr><td class="paramname">UnsupportedOperationException</td><td>If this command is not supported by this card. </td></tr>
    <tr><td class="paramname">IllegalArgumentException</td><td>If one of the provided argument is out of range. </td></tr>
    <tr><td class="paramname"><a class="el" href="classkeypop_1_1calypso_1_1card_1_1transaction_1_1_session_buffer_overflow_exception.html">SessionBufferOverflowException</a></td><td>If the command will overflow the modifications buffer size and the multiple session is not allowed. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section since"><dt>Since</dt><dd>1.1.0 </dd></dl>

</div>
</div>
<a id="a051530935694fc2f3ab0dc6e48529324" name="a051530935694fc2f3ab0dc6e48529324"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a051530935694fc2f3ab0dc6e48529324">&#9670;&nbsp;</a></span>prepareWriteRecord()</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename T &gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual T &amp; <a class="el" href="classkeypop_1_1calypso_1_1card_1_1transaction_1_1_transaction_manager.html">keypop::calypso::card::transaction::TransactionManager</a>&lt; T &gt;::prepareWriteRecord </td>
          <td>(</td>
          <td class="paramtype">const uint8_t&#160;</td>
          <td class="paramname"><em>sfi</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const int&#160;</td>
          <td class="paramname"><em>recordNumber</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::vector&lt; uint8_t &gt; &amp;&#160;</td>
          <td class="paramname"><em>recordData</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">pure virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p >Schedules the execution of a "Write Record" command to updates the target file's record contents with the result of a binary OR between the existing data and the provided data.</p>
<p >If the input data is shorter than the record size, only the first bytes will be overwritten.</p>
<p >Data will be available in <a class="el" href="">CalypsoCard</a> using the dedicated file and data management methods.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">sfi</td><td>The sfi to select. </td></tr>
    <tr><td class="paramname">recordNumber</td><td>The record to write. </td></tr>
    <tr><td class="paramname">recordData</td><td>The data to overwrite in the record. If length <div class="fragment"><div class="line">&lt;</div>
</div><!-- fragment --> RecSize, bytes. beyond length are left unchanged. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The current instance. </dd></dl>
<dl class="exception"><dt>Exceptions</dt><dd>
  <table class="exception">
    <tr><td class="paramname">IllegalArgumentException</td><td>If one of the provided argument is out of range. </td></tr>
    <tr><td class="paramname"><a class="el" href="classkeypop_1_1calypso_1_1card_1_1transaction_1_1_session_buffer_overflow_exception.html">SessionBufferOverflowException</a></td><td>If the command will overflow the modifications buffer size and the multiple session is not allowed. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section since"><dt>Since</dt><dd>1.0.0 </dd></dl>

</div>
</div>
<a id="a52963048d39ae94fab98f00eca4c54fe" name="a52963048d39ae94fab98f00eca4c54fe"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a52963048d39ae94fab98f00eca4c54fe">&#9670;&nbsp;</a></span>processCommands()</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename T &gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual T <a class="el" href="classkeypop_1_1calypso_1_1card_1_1transaction_1_1_transaction_manager.html">keypop::calypso::card::transaction::TransactionManager</a>&lt; T &gt;::processCommands </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="namespacekeypop_1_1calypso_1_1card_1_1transaction.html#ab7da988e9bca2716613809d838185b97">ChannelControl</a>&#160;</td>
          <td class="paramname"><em>channelControl</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">pure virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p >Processes all previously prepared commands and closes the physical channel if requested.</p>
<p >All APDUs corresponding to the prepared commands are sent to the card, their responses are retrieved and used to update the <a class="el" href="">CalypsoCard</a> associated with the transaction.</p>
<p >For write commands, the <a class="el" href="">CalypsoCard</a> is updated only when the command is successful.</p>
<p >The process is interrupted at the first failed command.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">channelControl</td><td>Policy for managing the physical channel after executing commands to the card. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The current instance. </dd></dl>
<dl class="exception"><dt>Exceptions</dt><dd>
  <table class="exception">
    <tr><td class="paramname"><a class="el" href="classkeypop_1_1calypso_1_1card_1_1transaction_1_1_reader_i_o_exception.html">ReaderIOException</a></td><td>If a communication error with the card reader or the cryptographic module reader occurs. </td></tr>
    <tr><td class="paramname"><a class="el" href="classkeypop_1_1calypso_1_1card_1_1transaction_1_1_card_i_o_exception.html">CardIOException</a></td><td>If a communication error with the card occurs. </td></tr>
    <tr><td class="paramname"><a class="el" href="classkeypop_1_1calypso_1_1card_1_1transaction_1_1_crypto_i_o_exception.html">CryptoIOException</a></td><td>If a communication error with the cryptographic module occurs. </td></tr>
    <tr><td class="paramname"><a class="el" href="classkeypop_1_1calypso_1_1card_1_1transaction_1_1_unexpected_command_status_exception.html">UnexpectedCommandStatusException</a></td><td>If a command returns an unexpected status. </td></tr>
    <tr><td class="paramname"><a class="el" href="classkeypop_1_1calypso_1_1card_1_1transaction_1_1_inconsistent_data_exception.html">InconsistentDataException</a></td><td>If inconsistent data have been detected. </td></tr>
    <tr><td class="paramname"><a class="el" href="classkeypop_1_1calypso_1_1card_1_1transaction_1_1_unauthorized_key_exception.html">UnauthorizedKeyException</a></td><td>If the card requires an unauthorized session key. </td></tr>
    <tr><td class="paramname"><a class="el" href="classkeypop_1_1calypso_1_1card_1_1transaction_1_1_card_signature_not_verifiable_exception.html">CardSignatureNotVerifiableException</a></td><td>If a secure session is open and multiple session mode is enabled and an intermediate session is correctly closed but the cryptographic module is no longer available to verify the card MAC. </td></tr>
    <tr><td class="paramname"><a class="el" href="classkeypop_1_1calypso_1_1card_1_1transaction_1_1_invalid_card_signature_exception.html">InvalidCardSignatureException</a></td><td>If the card signature is incorrect. In the case of a card transaction secured by "symmetrical" cryptography (e.g. SAM), this indicates that the card has correctly closed the secure session, but the card session is not authentic because the MAC of the card is incorrect. </td></tr>
    <tr><td class="paramname"><a class="el" href="classkeypop_1_1calypso_1_1card_1_1transaction_1_1_select_file_exception.html">SelectFileException</a></td><td>If a "Select File" prepared card command indicated that the file was not found. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section since"><dt>Since</dt><dd>1.6.0 </dd></dl>

</div>
</div>
<hr/>The documentation for this class was generated from the following file:<ul>
<li>/github/workspace/include/keypop/calypso/card/transaction/<a class="el" href="_transaction_manager_8hpp_source.html">TransactionManager.hpp</a></li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.2
</small></address>
</body>
</html>
